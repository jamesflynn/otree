{% extends "global/Page.html" %}
{% load staticfiles otree_tags %}

{% block title %}
    Transcription task {{ subsession.round_number }}/{{ Constants.num_rounds }}
{% endblock %}

{% block content %}

    <p>
        Please transcribe the text from the table in the image into the box below.<br><br>
        Example:<br><img src="{% static "transcription/exampleline.png" %}"/><br>
        Maine,3,,3,,<br><br>
        <strong>DO NOT</strong> include the digit-grouping commas that occur WITHIN a number: The number 129,262 should be entered as 129962
    </p>
    <p>You will be paid {{ player.agree1 }} for this page, if it is transcribed better than 95% accuracy. Thank you!</p>
    <div>
        <a target="_blank" href="{{ image_path }}"><img src="{% static "transcription/picture.png" %}"/> Click here to open image</a><br><br>
    </div>

    {% formfield player.transcribed_text with label="" %}


<input type="hidden" name="iQuit" value="0" />

    <div class="checkbox">
    <label class="control-label field-iQuit" for="id_iQuit">
        <input type="checkbox" name="iQuit" id="id_iQuit" value="1">
        I don't want to do this, I quit. (Select then hit next)</label>
    </div>

    {% next_button %}

    {% if debug %}
        <div class="box papereffect">
            <h4>Explanation for researchers (shown in debug mode only)</h4>
            <p>
                You are playing in debug mode, so you can skip the manual
                transcription
                by clicking <a href="#" id="prefill">this link</a>
                and clicking "next".
            </p>

            <p>
                A subject can only advance to the next screen if the
                transcription is {{ required_accuracy }}% accurate.
            </p>
        </div>

    {% endif %}
{% endblock %}

{% block scripts %}
<script>
    $(document).ready(function () {
        var referenceText = {{ reference_text }};
        $('a#prefill').click(function () {
            $('#id_transcribed_text').val(referenceText);
        })
    });
</script>
{% endblock %}